{"version":3,"sources":["DragDrop.js"],"names":["React","require","DragDropPlugin","propTypes","getHTMLProps","nonHtmlPropsHaveChanged","h","createElement","DragDrop","Component","componentDidMount","installPlugin","componentDidUpdate","prevProps","uppy","props","uninstallPlugin","options","target","container","plugin","setOptions","componentWillUnmount","id","use","getPlugin","removePlugin","render","validProps","ref","locale","defaultProps","module","exports"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,cAAc,GAAGD,OAAO,CAAC,iBAAD,CAA9B;;AACA,MAAME,SAAS,GAAGF,OAAO,CAAC,aAAD,CAAzB;;AACA,MAAMG,YAAY,GAAGH,OAAO,CAAC,gBAAD,CAA5B;;AACA,MAAMI,uBAAuB,GAAGJ,OAAO,CAAC,2BAAD,CAAvC;;AAEA,MAAMK,CAAC,GAAGN,KAAK,CAACO,aAAhB;AAEA;AACA;AACA;AACA;;AAEA,MAAMC,QAAN,SAAuBR,KAAK,CAACS,SAA7B,CAAuC;AACrCC,EAAAA,iBAAiB,GAAI;AACnB,SAAKC,aAAL;AACD;;AAEDC,EAAAA,kBAAkB,CAAEC,SAAF,EAAa;AAC7B,QAAIA,SAAS,CAACC,IAAV,KAAmB,KAAKC,KAAL,CAAWD,IAAlC,EAAwC;AACtC,WAAKE,eAAL,CAAqBH,SAArB;AACA,WAAKF,aAAL;AACD,KAHD,MAGO,IAAIN,uBAAuB,CAAC,IAAD,EAAOQ,SAAP,CAA3B,EAA8C;AACnD,YAAMI,OAAO,GAAG,EAAE,GAAG,KAAKF,KAAV;AAAiBG,QAAAA,MAAM,EAAE,KAAKC;AAA9B,OAAhB;AACA,aAAOF,OAAO,CAACH,IAAf;AACA,WAAKM,MAAL,CAAYC,UAAZ,CAAuBJ,OAAvB;AACD;AACF;;AAEDK,EAAAA,oBAAoB,GAAI;AACtB,SAAKN,eAAL;AACD;;AAEDL,EAAAA,aAAa,GAAI;AACf,UAAM;AAAEG,MAAAA;AAAF,QAAW,KAAKC,KAAtB;AACA,UAAME,OAAO,GAAG;AACdM,MAAAA,EAAE,EAAE,gBADU;AAEd,SAAG,KAAKR,KAFM;AAGdG,MAAAA,MAAM,EAAE,KAAKC;AAHC,KAAhB;AAKA,WAAOF,OAAO,CAACH,IAAf;AAEAA,IAAAA,IAAI,CAACU,GAAL,CAAStB,cAAT,EAAyBe,OAAzB;AAEA,SAAKG,MAAL,GAAcN,IAAI,CAACW,SAAL,CAAeR,OAAO,CAACM,EAAvB,CAAd;AACD;;AAEDP,EAAAA,eAAe,CAAED,KAAF,EAAsB;AAAA,QAApBA,KAAoB;AAApBA,MAAAA,KAAoB,GAAZ,KAAKA,KAAO;AAAA;;AACnC,UAAM;AAAED,MAAAA;AAAF,QAAWC,KAAjB;AAEAD,IAAAA,IAAI,CAACY,YAAL,CAAkB,KAAKN,MAAvB;AACD;;AAEDO,EAAAA,MAAM,GAAI;AACR;AACA,SAAKC,UAAL,GAAkBxB,YAAY,CAAC,KAAKW,KAAN,CAA9B;AACA,WAAOT,CAAC,CAAC,KAAD,EAAQ;AACduB,MAAAA,GAAG,EAAGV,SAAD,IAAe;AAClB,aAAKA,SAAL,GAAiBA,SAAjB;AACD,OAHa;AAId,SAAG,KAAKS;AAJM,KAAR,CAAR;AAMD;;AAjDoC;;AAoDvCpB,QAAQ,CAACL,SAAT,GAAqB;AACnBW,EAAAA,IAAI,EAAEX,SAAS,CAACW,IADG;AAEnBgB,EAAAA,MAAM,EAAE3B,SAAS,CAAC2B;AAFC,CAArB;AAIAtB,QAAQ,CAACuB,YAAT,GAAwB,EAAxB;AAGAC,MAAM,CAACC,OAAP,GAAiBzB,QAAjB","sourcesContent":["const React = require('react')\nconst DragDropPlugin = require('@uppy/drag-drop')\nconst propTypes = require('./propTypes')\nconst getHTMLProps = require('./getHTMLProps')\nconst nonHtmlPropsHaveChanged = require('./nonHtmlPropsHaveChanged')\n\nconst h = React.createElement\n\n/**\n * React component that renders an area in which files can be dropped to be\n * uploaded.\n */\n\nclass DragDrop extends React.Component {\n  componentDidMount () {\n    this.installPlugin()\n  }\n\n  componentDidUpdate (prevProps) {\n    if (prevProps.uppy !== this.props.uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    } else if (nonHtmlPropsHaveChanged(this, prevProps)) {\n      const options = { ...this.props, target: this.container }\n      delete options.uppy\n      this.plugin.setOptions(options)\n    }\n  }\n\n  componentWillUnmount () {\n    this.uninstallPlugin()\n  }\n\n  installPlugin () {\n    const { uppy } = this.props\n    const options = {\n      id: 'react:DragDrop',\n      ...this.props,\n      target: this.container,\n    }\n    delete options.uppy\n\n    uppy.use(DragDropPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)\n  }\n\n  uninstallPlugin (props = this.props) {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  render () {\n    // TODO: stop exposing `validProps` as a public property and rename it to `htmlProps`\n    this.validProps = getHTMLProps(this.props)\n    return h('div', {\n      ref: (container) => {\n        this.container = container\n      },\n      ...this.validProps,\n    })\n  }\n}\n\nDragDrop.propTypes = {\n  uppy: propTypes.uppy,\n  locale: propTypes.locale,\n}\nDragDrop.defaultProps = {\n}\n\nmodule.exports = DragDrop\n"]}