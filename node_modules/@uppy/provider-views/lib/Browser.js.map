{"version":3,"sources":["Browser.js"],"names":["h","require","classNames","remoteFileObjToLocal","Filter","FooterActions","Item","VIRTUAL_SHARED_DIR","Browser","props","currentSelection","folders","files","uppyFiles","viewType","headerComponent","showBreadcrumbs","isChecked","toggleCheckbox","handleScroll","showTitles","i18n","validateRestrictions","showFilter","filterQuery","filterInput","getNextFolder","cancel","done","columns","selected","length","map","folder","id","title","name","getItemIcon","icon","event","type","isDisabled","loading","isCheckboxDisabled","handleFolderClick","file","validated","author","result","restrictionReason","reason","module","exports"],"mappings":"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","sourcesContent":["const { h } = require('preact')\nconst classNames = require('classnames')\n\nconst remoteFileObjToLocal = require('@uppy/utils/lib/remoteFileObjToLocal')\n\nconst Filter = require('./Filter')\nconst FooterActions = require('./FooterActions')\nconst Item = require('./Item/index')\n\nconst VIRTUAL_SHARED_DIR = 'shared-with-me'\n\nfunction Browser (props) {\n  const {\n    currentSelection,\n    folders,\n    files,\n    uppyFiles,\n    viewType,\n    headerComponent,\n    showBreadcrumbs,\n    isChecked,\n    toggleCheckbox,\n    handleScroll,\n    showTitles,\n    i18n,\n    validateRestrictions,\n    showFilter,\n    filterQuery,\n    filterInput,\n    getNextFolder,\n    cancel,\n    done,\n    columns,\n  } = props\n\n  const selected = currentSelection.length\n\n  return (\n    <div\n      className={classNames(\n        'uppy-ProviderBrowser',\n        `uppy-ProviderBrowser-viewType--${viewType}`,\n      )}\n    >\n      <div className=\"uppy-ProviderBrowser-header\">\n        <div\n          className={classNames(\n            'uppy-ProviderBrowser-headerBar',\n            !showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple',\n          )}\n        >\n          {headerComponent}\n        </div>\n      </div>\n\n      {showFilter && (\n        <Filter\n          i18n={i18n}\n          filterQuery={filterQuery}\n          filterInput={filterInput}\n        />\n      )}\n\n      {(() => {\n        if (!folders.length && !files.length) {\n          return (\n            <div className=\"uppy-Provider-empty\">\n              {props.i18n('noFilesFound')}\n            </div>\n          )\n        }\n\n        return (\n          <div className=\"uppy-ProviderBrowser-body\">\n            <ul\n              className=\"uppy-ProviderBrowser-list\"\n              onScroll={handleScroll}\n              role=\"listbox\"\n              // making <ul> not focusable for firefox\n              tabIndex=\"-1\"\n            >\n              {folders.map((folder) => {\n                return Item({\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  id: folder.id,\n                  title: folder.name,\n                  getItemIcon: () => folder.icon,\n                  isChecked: isChecked(folder),\n                  toggleCheckbox: (event) => toggleCheckbox(event, folder),\n                  type: 'folder',\n                  isDisabled: isChecked(folder)?.loading,\n                  isCheckboxDisabled: folder.id === VIRTUAL_SHARED_DIR,\n                  handleFolderClick: () => getNextFolder(folder),\n                })\n              })}\n\n              {files.map((file) => {\n                const validated = validateRestrictions(\n                  remoteFileObjToLocal(file),\n                  [...uppyFiles, ...currentSelection],\n                )\n\n                return Item({\n                  id: file.id,\n                  title: file.name,\n                  author: file.author,\n                  getItemIcon: () => file.icon,\n                  isChecked: isChecked(file),\n                  toggleCheckbox: (event) => toggleCheckbox(event, file),\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  type: 'file',\n                  isDisabled: !validated.result && !isChecked(file),\n                  restrictionReason: validated.reason,\n                })\n              })}\n            </ul>\n          </div>\n        )\n      })()}\n\n      {selected > 0 && (\n        <FooterActions\n          selected={selected}\n          done={done}\n          cancel={cancel}\n          i18n={i18n}\n        />\n      )}\n    </div>\n  )\n}\n\nmodule.exports = Browser\n"]}